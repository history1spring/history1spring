<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>10ì§„ìˆ˜ â†” 2ì§„ìˆ˜ ê²Œì„</title>
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f3f4f6;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    .game-wrapper {
      background: #ffffff;
      border-radius: 16px;
      padding: 24px 20px 28px;
      max-width: 560px;
      width: 100%;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    }

    .title {
      font-size: 1.4rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 0.9rem;
      text-align: center;
      color: #6b7280;
      margin-bottom: 18px;
    }

    .mode-switch {
      display: flex;
      border-radius: 999px;
      background: #e5e7eb;
      padding: 4px;
      margin-bottom: 10px;
      gap: 4px;
    }

    .mode-btn {
      flex: 1;
      border: none;
      border-radius: 999px;
      padding: 8px 0;
      font-size: 0.85rem;
      cursor: pointer;
      background: transparent;
      color: #4b5563;
      transition: background 0.15s ease, color 0.15s ease;
    }

    .mode-btn.active {
      background: #111827;
      color: #f9fafb;
      font-weight: 600;
    }

    .progress-wrapper {
      margin: 6px 0 8px;
    }

    .progress-bg {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      width: 0;
      background: #16a34a;
      transition: width 0.15s ease;
    }

    .status-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.9rem;
      margin-bottom: 6px;
      color: #4b5563;
    }

    .status-row span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .status-label {
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .difficulty-row {
      margin: 8px 0 14px;
      font-size: 0.85rem;
      color: #4b5563;
    }

    .difficulty-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .difficulty-slider {
      width: 100%;
    }

    .difficulty-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 2px;
    }

    .difficulty-info {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 4px;
    }

    .question-box {
      background: #111827;
      color: #f9fafb;
      border-radius: 12px;
      padding: 14px 12px;
      margin-bottom: 14px;
    }

    .question-label {
      font-size: 0.8rem;
      color: #9ca3af;
      margin-bottom: 4px;
    }

    .question-text {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .input-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
      flex-wrap: wrap;
    }

    .answer-input {
      flex: 1;
      min-width: 160px;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      font-size: 0.95rem;
      outline: none;
    }

    .answer-input:focus {
      border-color: #111827;
      box-shadow: 0 0 0 1px #11182720;
    }

    .btn {
      border: none;
      border-radius: 10px;
      padding: 8px 10px;
      cursor: pointer;
      font-size: 0.9rem;
      white-space: nowrap;
      transition: transform 0.05s ease, box-shadow 0.05s ease, background 0.2s ease;
    }

    .btn-primary {
      background: #111827;
      color: #f9fafb;
    }

    .btn-secondary {
      background: #e5e7eb;
      color: #111827;
    }

    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 1px 2px rgba(0,0,0,0.15) inset;
    }

    .feedback {
      min-height: 22px;
      font-size: 0.9rem;
      margin-bottom: 4px;
    }

    .feedback.correct { color: #16a34a; }
    .feedback.wrong { color: #dc2626; }
    .feedback.notice { color: #6b7280; }

    /* ğŸ‘‰ íŒíŠ¸ë¥¼ ë” ì§„í•˜ê²Œ, ëˆˆì— ì˜ ë„ê²Œ */
    .hint-box {
      min-height: 20px;
      font-size: 0.85rem;
      color: #111827;
      margin-bottom: 6px;
      font-weight: 600;
    }

    .hint {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 4px;
      line-height: 1.4;
    }

    .footer {
      margin-top: 12px;
      font-size: 0.75rem;
      color: #9ca3af;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    @media (max-width: 480px) {
      .game-wrapper {
        border-radius: 0;
        height: 100vh;
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="game-wrapper">
    <div class="title">10ì§„ìˆ˜ â†” 2ì§„ìˆ˜ ê²Œì„</div>
    <div class="subtitle">ìŠ¬ë¼ì´ë”ë¡œ ë‚œì´ë„ë¥¼ ë°”ê¾¸ë©´ì„œ ì§„ë²• ë³€í™˜ì„ ì—°ìŠµí•´ìš”!</div>

    <div class="mode-switch">
      <button id="mode10to2" class="mode-btn active">
        10ì§„ìˆ˜ â†’ 2ì§„ìˆ˜
      </button>
      <button id="mode2to10" class="mode-btn">
        2ì§„ìˆ˜ â†’ 10ì§„ìˆ˜
      </button>
    </div>

    <div class="progress-wrapper">
      <div class="progress-bg">
        <div id="progressBar" class="progress-bar"></div>
      </div>
    </div>

    <div class="status-row">
      <span>
        <span class="status-label">ì ìˆ˜</span>
        <span id="scoreText">0 / 0</span>
      </span>
      <span>
        <span class="status-label">ì—°ì† ì •ë‹µ</span>
        <span id="streakText">0</span>
      </span>
    </div>

    <div class="difficulty-row">
      <div class="difficulty-top">
        <span class="status-label">ë‚œì´ë„</span>
        <span id="rangeText">1 ~ 15</span>
      </div>
      <input
        id="difficultySlider"
        class="difficulty-slider"
        type="range"
        min="1"
        max="5"
        value="2"
      />
      <div class="difficulty-labels">
        <span>ì‰¬ì›€</span>
        <span>ë³´í†µ</span>
        <span>ì–´ë ¤ì›€</span>
      </div>
      <div id="difficultyInfo" class="difficulty-info">
        ë ˆë²¨ 2: 1 ~ 15 (4ë¹„íŠ¸ ì´ë‚´)
      </div>
    </div>

    <div class="question-box">
      <div class="question-label">ë¬¸ì œ</div>
      <div id="question" class="question-text">
        ë¡œë”© ì¤‘...
      </div>
    </div>

    <div class="input-row">
      <input
        id="answerInput"
        class="answer-input"
        type="text"
        autocomplete="off"
        placeholder="ì—¬ê¸°ì— ë‹µì„ ì ìœ¼ì„¸ìš”"
      />
      <button id="checkBtn" class="btn btn-primary">ì±„ì </button>
    </div>

    <div class="input-row">
      <button id="nextBtn" class="btn btn-secondary">ë‹¤ìŒ ë¬¸ì œ</button>
      <button id="resetBtn" class="btn btn-secondary">ì ìˆ˜ ì´ˆê¸°í™”</button>
      <button id="hintBtn" class="btn btn-secondary">íŒíŠ¸ ë³´ê¸°</button>
    </div>

    <div id="feedback" class="feedback notice">
      ë‹µì„ ì“°ê³  <b>ì±„ì </b> ë²„íŠ¼ì„ ëˆŒëŸ¬ ë³´ì„¸ìš”.
    </div>
    <div id="hintBox" class="hint-box"></div>

    <div class="hint">
      â€¢ 2ì§„ìˆ˜ì—ëŠ” ìˆ«ì <b>0</b>ê³¼ <b>1</b>ë§Œ ì‚¬ìš©í•´ìš”.<br />
      â€¢ ë‚œì´ë„ ìŠ¬ë¼ì´ë”ë¡œ ìˆ«ì ë²”ìœ„ë¥¼ ë°”ê¿€ ìˆ˜ ìˆì–´ìš”. (3~8ë¹„íŠ¸)
    </div>

    <div class="footer">
      <span>ì „ì²´ í™”ë©´ìœ¼ë¡œ ë„ì›Œ ë†“ê³ , ë°˜ ì „ì²´ê°€ ê°™ì´ í€´ì¦ˆì²˜ëŸ¼ í’€ì–´ë„ ì¢‹ì•„ìš”.</span>
      <span>ì œì‘ : ì†ì„œìœ¨</span>
    </div>
  </div>

  <script>
    // ====== ë‚œì´ë„ ì„¤ì • ======
    const LEVELS = [
      { id: 1, label: "ë ˆë²¨ 1", min: 1,  max: 7,   desc: "1 ~ 7 (3ë¹„íŠ¸ ì´ë‚´)" },
      { id: 2, label: "ë ˆë²¨ 2", min: 1,  max: 15,  desc: "1 ~ 15 (4ë¹„íŠ¸ ì´ë‚´)" },
      { id: 3, label: "ë ˆë²¨ 3", min: 1,  max: 31,  desc: "1 ~ 31 (5ë¹„íŠ¸ ì´ë‚´)" },
      { id: 4, label: "ë ˆë²¨ 4", min: 1,  max: 63,  desc: "1 ~ 63 (6ë¹„íŠ¸ ì´ë‚´)" },
      { id: 5, label: "ë ˆë²¨ 5", min: 1,  max: 255, desc: "1 ~ 255 (8ë¹„íŠ¸ ì´ë‚´)" }
    ];

    let currentLevel = 2;   // ìŠ¬ë¼ì´ë” ê¸°ë³¸ê°’ê³¼ ë§ì¶¤ (value="2")
    let mode = "10to2";     // "10to2" ë˜ëŠ” "2to10"
    let currentNumber = 0;  // ì‹¤ì œ 10ì§„ìˆ˜ ê°’
    let score = 0;
    let total = 0;
    let streak = 0;

    // ====== DOM ì—°ê²° ======
    const mode10to2Btn = document.getElementById("mode10to2");
    const mode2to10Btn = document.getElementById("mode2to10");
    const questionEl = document.getElementById("question");
    const answerInput = document.getElementById("answerInput");
    const checkBtn = document.getElementById("checkBtn");
    const nextBtn = document.getElementById("nextBtn");
    const resetBtn = document.getElementById("resetBtn");
    const hintBtn = document.getElementById("hintBtn");
    const feedbackEl = document.getElementById("feedback");
    const scoreTextEl = document.getElementById("scoreText");
    const streakTextEl = document.getElementById("streakText");
    const rangeTextEl = document.getElementById("rangeText");
    const difficultySliderEl = document.getElementById("difficultySlider");
    const difficultyInfoEl = document.getElementById("difficultyInfo");
    const progressBarEl = document.getElementById("progressBar");
    const hintBoxEl = document.getElementById("hintBox");

    // ====== ìœ í‹¸ í•¨ìˆ˜ ======
    function getCurrentLevelConfig() {
      return LEVELS[currentLevel - 1];
    }

    function getRandomNumber() {
      const cfg = getCurrentLevelConfig();
      return Math.floor(Math.random() * (cfg.max - cfg.min + 1)) + cfg.min;
    }

    function toBinaryString(num) {
      return num.toString(2);
    }

    function updateScoreText() {
      scoreTextEl.textContent = `${score} / ${total}`;
      updateProgressBar();
    }

    function updateStreakText() {
      streakTextEl.textContent = `${streak}`;
    }

    function updateProgressBar() {
      if (total === 0) {
        progressBarEl.style.width = "0%";
        return;
      }
      const ratio = score / total;
      const percent = Math.round(ratio * 100);
      progressBarEl.style.width = percent + "%";
    }

    function setFeedback(message, type) {
      feedbackEl.textContent = message;
      feedbackEl.className = "feedback " + (type || "notice");
    }

    function updateDifficultyUI() {
      const cfg = getCurrentLevelConfig();
      rangeTextEl.textContent = `${cfg.min} ~ ${cfg.max}`;
      difficultyInfoEl.textContent = `${cfg.label}: ${cfg.desc}`;
    }

    // ====== ë¬¸ì œ ìƒì„± ======
    function generateQuestion() {
      currentNumber = getRandomNumber();
      const binaryStr = toBinaryString(currentNumber);

      if (mode === "10to2") {
        questionEl.textContent = `${currentNumber} (10ì§„ìˆ˜)ë¥¼ 2ì§„ìˆ˜ë¡œ ë°”ê¿” ë³´ì„¸ìš”.`;
      } else {
        questionEl.textContent = `${binaryStr} (2ì§„ìˆ˜)ë¥¼ 10ì§„ìˆ˜ë¡œ ë°”ê¿” ë³´ì„¸ìš”.`;
      }

      answerInput.value = "";
      hintBoxEl.textContent = "";
      setFeedback("ë‹µì„ ì“°ê³  ì±„ì  ë²„íŠ¼ì„ ëˆŒëŸ¬ ë³´ì„¸ìš”.", "notice");
      answerInput.focus();
      updateDifficultyUI();
    }

    // ====== ëª¨ë“œ ì „í™˜ ======
    function setMode(newMode) {
      if (newMode === mode) return;
      mode = newMode;

      if (mode === "10to2") {
        mode10to2Btn.classList.add("active");
        mode2to10Btn.classList.remove("active");
      } else {
        mode10to2Btn.classList.remove("active");
        mode2to10Btn.classList.add("active");
      }

      generateQuestion();
    }

    // ====== ì±„ì  ======
    function checkAnswer() {
      const raw = answerInput.value.trim();

      if (!raw) {
        setFeedback("ë¨¼ì € ë‹µì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.", "notice");
        return;
      }

      total += 1; // ì±„ì  ì‹œë„ ìˆ˜

      if (mode === "10to2") {
        // 10ì§„ìˆ˜ â†’ 2ì§„ìˆ˜
        const sanitized = raw.replace(/\s+/g, "");

        if (!/^[01]+$/.test(sanitized)) {
          total -= 1; // í˜•ì‹ ì˜¤ë¥˜ëŠ” ì±„ì  ì¹´ìš´íŠ¸ì—ì„œ ì œì™¸
          setFeedback("2ì§„ìˆ˜ì—ëŠ” 0ê³¼ 1ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”!", "wrong");
          return;
        }

        const userValue = parseInt(sanitized, 2);
        const correctBinary = toBinaryString(currentNumber);

        if (userValue === currentNumber) {
          score += 1;
          streak += 1;
          setFeedback(
            `ì •ë‹µì´ì—ìš”! ${currentNumber}(10) = ${correctBinary}(2)`,
            "correct"
          );
        } else {
          streak = 0;
          setFeedback(
            `ì•„ì‰¬ì›Œìš”. ì •ë‹µì€ ${correctBinary}(2) ì…ë‹ˆë‹¤. (${currentNumber}(10))`,
            "wrong"
          );
        }
      } else {
        // 2ì§„ìˆ˜ â†’ 10ì§„ìˆ˜
        if (!/^[0-9]+$/.test(raw)) {
          total -= 1; // í˜•ì‹ ì˜¤ë¥˜ëŠ” ì±„ì  ì¹´ìš´íŠ¸ì—ì„œ ì œì™¸
          setFeedback("10ì§„ìˆ˜ ë‹µì€ ìˆ«ìë¡œë§Œ ì…ë ¥í•´ ì£¼ì„¸ìš”.", "wrong");
          return;
        }

        const userNum = parseInt(raw, 10);
        const correctBinary = toBinaryString(currentNumber);

        if (userNum === currentNumber) {
          score += 1;
          streak += 1;
          setFeedback(
            `ì •ë‹µì´ì—ìš”! ${correctBinary}(2) = ${currentNumber}(10)`,
            "correct"
          );
        } else {
          streak = 0;
          setFeedback(
            `ì•„ì‰¬ì›Œìš”. ì •ë‹µì€ ${currentNumber}(10) ì…ë‹ˆë‹¤. (${correctBinary}(2))`,
            "wrong"
          );
        }
      }

      updateScoreText();
      updateStreakText();
    }

    // ====== ì ìˆ˜ ì´ˆê¸°í™” ======
    function resetGame() {
      score = 0;
      total = 0;
      streak = 0;
      updateScoreText();
      updateStreakText();
      hintBoxEl.textContent = "";
      setFeedback("ì ìˆ˜ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒˆ ë¬¸ì œë¥¼ í’€ì–´ ë³´ì„¸ìš”!", "notice");
      generateQuestion();
    }

    // ====== íŒíŠ¸ í‘œì‹œ (7í•™ë…„ ëˆˆë†’ì´ ì„¤ëª…, 1ë¶€í„° ì‹œì‘) ======
    function showHint() {
      if (mode === "10to2") {
        // 10ì§„ìˆ˜ â†’ 2ì§„ìˆ˜ íŒíŠ¸
        hintBoxEl.textContent =
          "1, 2, 4, 8, 16, 32... ì²˜ëŸ¼ 2ë¥¼ ê³„ì† ê³±í•´ì„œ ì»¤ì§€ëŠ” ìˆ˜ë“¤ì„ ë– ì˜¬ë ¤ ë³´ì„¸ìš”. " +
          "ì´ ìˆ«ìë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ê°€ì¥ í° ìˆ˜ë¶€í„° ë¨¼ì € ê³¨ë¼ìš”. " +
          "ê·¸ ìˆ˜ë¥¼ ì“°ëŠ” ìë¦¬ëŠ” 1, ì“°ì§€ ì•ŠëŠ” ìë¦¬ëŠ” 0ì´ë¼ê³  ìƒê°í•˜ë©´ì„œ í° ìˆ˜ë¶€í„° í•˜ë‚˜ì”© ë¹¼ ê°€ë©° 1ê³¼ 0ì„ ì±„ì›Œ ë³´ì„¸ìš”.";
      } else {
        // 2ì§„ìˆ˜ â†’ 10ì§„ìˆ˜ íŒíŠ¸
        hintBoxEl.textContent =
          "ë§¨ ì˜¤ë¥¸ìª½ ìˆ«ìëŠ” 1, ê·¸ ì™¼ìª½ì€ 2, ê·¸ ë‹¤ìŒì€ 4, 8, 16... ìë¦¬ë¼ê³  ìƒê°í•´ ë³´ì„¸ìš”. " +
          "ìˆ«ìê°€ 1ì¸ ìë¦¬ì— ìˆëŠ” ê°’ë“¤ë§Œ ê³¨ë¼ì„œ ëª¨ë‘ ë”í•˜ë©´ 10ì§„ìˆ˜ ê°’ì´ ë¼ìš”.";
      }
    }

    // ====== ì´ë²¤íŠ¸ ì—°ê²° ======
    mode10to2Btn.addEventListener("click", () => setMode("10to2"));
    mode2to10Btn.addEventListener("click", () => setMode("2to10"));

    checkBtn.addEventListener("click", checkAnswer);
    nextBtn.addEventListener("click", generateQuestion);
    resetBtn.addEventListener("click", resetGame);
    hintBtn.addEventListener("click", showHint);

    answerInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        checkAnswer();
      }
    });

    difficultySliderEl.addEventListener("input", () => {
      currentLevel = parseInt(difficultySliderEl.value, 10);
      generateQuestion();
    });

    // ====== ì´ˆê¸° ì„¤ì • ======
    updateDifficultyUI();
    updateScoreText();
    updateStreakText();
    generateQuestion();
  </script>
</body>
</html>
